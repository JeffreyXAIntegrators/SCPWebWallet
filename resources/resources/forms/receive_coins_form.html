<div class='middle pad'>
  <div id="displayAddress" class='inline-block'>
    &ADDRESS;
  </div>
  <div id="copiedIcon" class='inline-block cursor-help' title='address copied to clipboard'></div>
</div>
<div class="middle pad blue-dashed">
  <div id="copyAddressToClipboard" class="inline-block"></div>
  <div id="expandAddress" class="inline-block"></div>
  <div id="collapseAddress" class="inline-block"></div>
  <div class="inline-block">
    <form action="/gui?&CACHE_BUSTER;" method="post">
      <input type="hidden" name="session_id" value="&SESSION_ID;">
      <button type="submit">Close</button>
    </form>
  </div>
  <script>
    function addCopiedIcon() {
      document.getElementById('copiedIcon').innerHTML = 'üñ®Ô∏è'
    }
    function removeCopiedIcon() {
      document.getElementById('copiedIcon').innerHTML = ''
    }
    function displayAddress() {
      if (isAddressCollapsed) {
        var collapsedAddress = address.substring(0, 10) + '...' + address.substring(address.length - 10);
        document.getElementById('displayAddress').innerHTML = collapsedAddress
      } else {
        document.getElementById('displayAddress').innerHTML = address
      }
      removeCopiedIcon()
    }
    function expandAddress() {
      isAddressCollapsed = false
      document.getElementById("collapseAddress").innerHTML = '<button onclick="collapseAddress()">Collapse</button>'
      document.getElementById("expandAddress").innerHTML = ''
      displayAddress()
    }
    function collapseAddress() {
      isAddressCollapsed = true
      document.getElementById("expandAddress").innerHTML = '<button onclick="expandAddress()">Expand</button>'
      document.getElementById("collapseAddress").innerHTML = ''
      displayAddress()
    }
    function copyAddressToClipboard() {
      copyToClipboard(address)
      addCopiedIcon()
    }
    var address = '&ADDRESS;'.toLowerCase()
    var isAddressCollapsed = true
    collapseAddress()
    document.getElementById("copyAddressToClipboard").innerHTML = `<button onclick="copyAddressToClipboard()">Copy</button>`
  </script>
</div>

